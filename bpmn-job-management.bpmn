<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL"
  id="Definitions_JobMgmt" targetNamespace="http://example.com/bpmn">
  <bpmn:collaboration id="Collab_JobMgmt">
    <bpmn:participant id="P_Recruiter" name="Recruiter" processRef="Process_Recruiter"/>
    <bpmn:participant id="P_Admin" name="Admin" processRef="Process_Admin"/>
  </bpmn:collaboration>

  <bpmn:process id="Process_Recruiter" isExecutable="true">
    <bpmn:startEvent id="Start_R" name="Tạo/Sửa Job"/>
    <bpmn:task id="Task_Save" name="Lưu Job (draft/published)"/>
    <bpmn:exclusiveGateway id="GW_ApprovalNeeded" name="Cần duyệt?"/>
    <bpmn:task id="Task_RequestApproval" name="Gửi yêu cầu duyệt"/>
    <bpmn:exclusiveGateway id="GW_Result" name="Kết quả duyệt"/>
    <bpmn:task id="Task_Publish" name="Publish Job"/>
    <bpmn:task id="Task_Close" name="Close Job"/>
    <bpmn:endEvent id="End_R" name="Kết thúc"/>
    <bpmn:sequenceFlow id="JR1" sourceRef="Start_R" targetRef="Task_Save"/>
    <bpmn:sequenceFlow id="JR2" sourceRef="Task_Save" targetRef="GW_ApprovalNeeded"/>
    <bpmn:sequenceFlow id="JR3" sourceRef="GW_ApprovalNeeded" targetRef="Task_RequestApproval"/>
    <bpmn:sequenceFlow id="JR4" sourceRef="Task_RequestApproval" targetRef="GW_Result"/>
    <bpmn:sequenceFlow id="JR5" sourceRef="GW_Result" targetRef="Task_Publish"/>
    <bpmn:sequenceFlow id="JR6" sourceRef="Task_Publish" targetRef="End_R"/>
    <bpmn:sequenceFlow id="JR7" sourceRef="Task_Close" targetRef="End_R"/>
  </bpmn:process>

  <bpmn:process id="Process_Admin" isExecutable="true">
    <bpmn:startEvent id="Start_A" name="Nhận yêu cầu duyệt"/>
    <bpmn:task id="Task_ReviewJob" name="Review Job"/>
    <bpmn:exclusiveGateway id="GW_AdminDecision" name="Approve?"/>
    <bpmn:task id="Task_Approve" name="Approve"/>
    <bpmn:task id="Task_Reject" name="Reject"/>
    <bpmn:endEvent id="End_A" name="Kết thúc"/>
    <bpmn:sequenceFlow id="JA1" sourceRef="Start_A" targetRef="Task_ReviewJob"/>
    <bpmn:sequenceFlow id="JA2" sourceRef="Task_ReviewJob" targetRef="GW_AdminDecision"/>
    <bpmn:sequenceFlow id="JA3" sourceRef="GW_AdminDecision" targetRef="Task_Approve"/>
    <bpmn:sequenceFlow id="JA4" sourceRef="GW_AdminDecision" targetRef="Task_Reject"/>
    <bpmn:sequenceFlow id="JA5" sourceRef="Task_Approve" targetRef="End_A"/>
    <bpmn:sequenceFlow id="JA6" sourceRef="Task_Reject" targetRef="End_A"/>
  </bpmn:process>
</bpmn:definitions>
